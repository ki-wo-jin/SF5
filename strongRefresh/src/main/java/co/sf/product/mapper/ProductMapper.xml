<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.sf.product.mapper.ProductMapper">

	<select id="selectList" resultType="co.sf.product.vo.ProductVO">
		select *
		from product_f5
		where product_code = #{productCode}
	</select>
	
	<select id ="selectListPaging">
		select b.*
		from (select /*+INDEX_DESC(r SYS_C007211)*/ rownum rn, r.*
		from product_f5 r
		where rowid in (select max(rowid)from product_f5 group by product_name)
		 and  categorie like upper(#{category})) b
        <![CDATA[
		where  b.rn <= (#{page}) * 12
		]]>
		and b.rn > (#{page} -1) * 12
	</select>
	
	<select id="selectTotalCnt" parameterType="int">
	    select count(1) from product_f5
	</select>
	
	<select id="categoryList">
	    select *
	    from product_category_order_v
	</select>
	
	<select id="selectProductPaging">
	    select b.*
			from (select rownum rn, a.*
      			from (select *
                  from product_f5_v p
                  where categorie = NVL(#{category}, categorie)
                  order by 1) a ) b
      <![CDATA[
      where b.rn <= (#{page} * 12)
      ]]>
      and   b.rn > (#{page} - 1) * 12
	</select>

</mapper>